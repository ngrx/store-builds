!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/store",["exports","@angular/core","rxjs","rxjs/operators"],t):t((e.ngrx=e.ngrx||{},e.ngrx.store={}),e.ng.core,e.Rx,e.operators)}(this,function(e,t,r,n){"use strict";function o(e,t){void 0===t&&(t={});for(var r=Object.keys(e),n={},o=0;o<r.length;o++){var i=r[o];"function"==typeof e[i]&&(n[i]=e[i])}var u=Object.keys(n);return function(e,r){e=void 0===e?t:e;for(var o=!1,i={},c=0;c<u.length;c++){var a=u[c],s=n[a],p=e[a],d=s(p,r);i[a]=d,o=o||d!==p}return o?i:e}}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){if(0===e.length)return t;var r=e[e.length-1];return e.slice(0,-1).reduceRight(function(e,t){return t(e)},r(t))}}function u(e,t){return Array.isArray(t)&&t.length>0?i.apply(null,t.concat([e])):e}function c(e,t){void 0===e&&(e={state:void 0});var r=t[0];return{state:(0,t[1])(e.state,r),action:r}}function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(r){var o;if("string"==typeof e)o=r.pipe(n.pluck.apply(void 0,[e].concat(t)));else{if("function"!=typeof e)throw new TypeError("Unexpected type '"+typeof e+"' in select operator, expected 'string' or 'function'");o=r.pipe(n.map(e))}return o.pipe(n.distinctUntilChanged())}}function s(e,t){return e===t}function p(e,t){void 0===t&&(t=s);var r=null,n=null;return{memoized:function(){if(!r)return n=e.apply(null,arguments),r=arguments,n;for(var o=0;o<arguments.length;o++)if(!t(arguments[o],r[o]))return n=e.apply(null,arguments),r=arguments,n;return n},reset:function(){r=null,n=null}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l(p).apply(void 0,e)}function f(e,t,r){var n=t.map(function(t){return t(e)});return r.memoized.apply(null,n)}function l(e,t){return void 0===t&&(t={stateFn:f}),function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=r;if(Array.isArray(o[0])){var i=o[0],u=o.slice(1);o=i.concat(u)}var c=o.slice(0,o.length-1),a=o[o.length-1],s=c.filter(function(e){return e.release&&"function"==typeof e.release}),d=e(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.apply(null,e)}),f=p(function(e){return t.stateFn.apply(null,[e,c,d])});return Object.assign(f.memoized,{release:function(){f.reset(),d.reset(),s.forEach(function(e){return e.release()})},projector:d.memoized})}}function y(e,r,n){return r instanceof t.InjectionToken?e.get(r):r}function v(e,r,n){return r.map(function(r,n){return r instanceof t.InjectionToken?e.get(r):r})}function h(e){return"function"==typeof e?e():e}var g=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),R="@ngrx/store/init",I=function(e){function t(){return e.call(this,{type:R})||this}return g(t,e),t.prototype.next=function(t){if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");e.prototype.next.call(this,t)},t.prototype.complete=function(){},t.prototype.ngOnDestroy=function(){e.prototype.complete.call(this)},t}(r.BehaviorSubject);I.decorators=[{type:t.Injectable}],I.ctorParameters=function(){return[]};var j=[I],m=new t.InjectionToken("@ngrx/store Internal Initial State"),b=new t.InjectionToken("@ngrx/store Initial State"),S=new t.InjectionToken("@ngrx/store Reducer Factory"),E=new t.InjectionToken("@ngrx/store Reducer Factory Provider"),x=new t.InjectionToken("@ngrx/store Initial Reducers"),T=new t.InjectionToken("@ngrx/store Internal Initial Reducers"),F=new t.InjectionToken("@ngrx/store Meta Reducers"),O=new t.InjectionToken("@ngrx/store Store Features"),_=new t.InjectionToken("@ngrx/store Internal Store Reducers"),A=new t.InjectionToken("@ngrx/store Internal Feature Reducers"),k=new t.InjectionToken("@ngrx/store Internal Feature Reducers Token"),w=new t.InjectionToken("@ngrx/store Feature Reducers"),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t}(r.Observable),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t}(I),U="@ngrx/store/update-reducers",P=function(e){function t(t,r,n,o){var i=e.call(this,o(n,r))||this;return i.dispatcher=t,i.initialState=r,i.reducers=n,i.reducerFactory=o,i}return g(t,e),t.prototype.addFeature=function(e){var t=e.reducers,r=e.reducerFactory,n=e.metaReducers,o=e.initialState,c=e.key,a="function"==typeof t?function(e){var t=Array.isArray(e)&&e.length>0?i.apply(void 0,e):function(e){return e};return function(e,r){return e=t(e),function(t,n){return t=void 0===t?r:t,e(t,n)}}}(n)(t,o):u(r,n)(t,o);this.addReducer(c,a)},t.prototype.removeFeature=function(e){var t=e.key;this.removeReducer(t)},t.prototype.addReducer=function(e,t){this.reducers=Object.assign({},this.reducers,(r={},r[e]=t,r)),this.updateReducers(e);var r},t.prototype.removeReducer=function(e){this.reducers=function(e,t){return Object.keys(e).filter(function(e){return e!==t}).reduce(function(t,r){return Object.assign(t,(n={},n[r]=e[r],n));var n},{})}(this.reducers,e),this.updateReducers(e)},t.prototype.updateReducers=function(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:U,feature:e})},t.prototype.ngOnDestroy=function(){this.complete()},t}(r.BehaviorSubject);P.decorators=[{type:t.Injectable}],P.ctorParameters=function(){return[{type:D},{type:void 0,decorators:[{type:t.Inject,args:[b]}]},{type:void 0,decorators:[{type:t.Inject,args:[x]}]},{type:void 0,decorators:[{type:t.Inject,args:[S]}]}]};var C=[P,{provide:M,useExisting:P},{provide:D,useExisting:I}],N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.ngOnDestroy=function(){this.complete()},t}(r.Subject);N.decorators=[{type:t.Injectable}],N.ctorParameters=function(){return[]};var V=[N],z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t}(r.Observable),L=function(e){function t(t,o,i,u){var a=e.call(this,u)||this,s={state:u},p=t.pipe(n.observeOn(r.queueScheduler)).pipe(n.withLatestFrom(o)).pipe(n.scan(c,s));return a.stateSubscription=p.subscribe(function(e){var t=e.state,r=e.action;a.next(t),i.next(r)}),a}return g(t,e),t.prototype.ngOnDestroy=function(){this.stateSubscription.unsubscribe(),this.complete()},t}(r.BehaviorSubject);L.INIT=R,L.decorators=[{type:t.Injectable}],L.ctorParameters=function(){return[{type:I},{type:M},{type:N},{type:void 0,decorators:[{type:t.Inject,args:[b]}]}]};var q=[L,{provide:z,useExisting:L}],B=function(e){function t(t,r,n){var o=e.call(this)||this;return o.actionsObserver=r,o.reducerManager=n,o.source=t,o}return g(t,e),t.prototype.select=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return a.apply(void 0,[e].concat(t))(this)},t.prototype.lift=function(e){var r=new t(this,this.actionsObserver,this.reducerManager);return r.operator=e,r},t.prototype.dispatch=function(e){this.actionsObserver.next(e)},t.prototype.next=function(e){this.actionsObserver.next(e)},t.prototype.error=function(e){this.actionsObserver.error(e)},t.prototype.complete=function(){this.actionsObserver.complete()},t.prototype.addReducer=function(e,t){this.reducerManager.addReducer(e,t)},t.prototype.removeReducer=function(e){this.reducerManager.removeReducer(e)},t}(r.Observable);B.decorators=[{type:t.Injectable}],B.ctorParameters=function(){return[{type:z},{type:I},{type:P}]};var Y=[B],K=function(){return function(e,t,r,n){}}();K.decorators=[{type:t.NgModule,args:[{}]}],K.ctorParameters=function(){return[{type:I},{type:M},{type:N},{type:B}]};var G=function(){function e(e,t,r,n){this.features=e,this.featureReducers=t,this.reducerManager=r,e.map(function(e,r){var n=t.shift()[r];return Object.assign({},e,{reducers:n,initialState:h(e.initialState)})}).forEach(function(e){return r.addFeature(e)})}return e.prototype.ngOnDestroy=function(){var e=this;this.features.forEach(function(t){return e.reducerManager.removeFeature(t)})},e}();G.decorators=[{type:t.NgModule,args:[{}]}],G.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Inject,args:[O]}]},{type:Array,decorators:[{type:t.Inject,args:[w]}]},{type:P},{type:K}]};var H=function(){function e(){}return e.forRoot=function(e,r){return void 0===r&&(r={}),{ngModule:K,providers:[{provide:m,useValue:r.initialState},{provide:b,useFactory:h,deps:[m]},{provide:T,useValue:e},{provide:_,useExisting:e instanceof t.InjectionToken?e:T},{provide:x,deps:[t.Injector,T,[new t.Inject(_)]],useFactory:y},{provide:F,useValue:r.metaReducers?r.metaReducers:[]},{provide:E,useValue:r.reducerFactory?r.reducerFactory:o},{provide:S,deps:[E,F],useFactory:u},j,C,V,q,Y]}},e.forFeature=function(e,r,n){return void 0===n&&(n={}),{ngModule:G,providers:[{provide:O,multi:!0,useValue:{key:e,reducerFactory:n.reducerFactory?n.reducerFactory:o,metaReducers:n.metaReducers?n.metaReducers:[],initialState:n.initialState}},{provide:A,multi:!0,useValue:r},{provide:k,multi:!0,useExisting:r instanceof t.InjectionToken?r:A},{provide:w,multi:!0,deps:[t.Injector,A,[new t.Inject(k)]],useFactory:v}]}},e}();H.decorators=[{type:t.NgModule,args:[{}]}],H.ctorParameters=function(){return[]},e.Store=B,e.select=a,e.combineReducers=o,e.compose=i,e.createReducerFactory=u,e.ActionsSubject=I,e.INIT=R,e.ReducerManager=P,e.ReducerObservable=M,e.ReducerManagerDispatcher=D,e.UPDATE=U,e.ScannedActionsSubject=N,e.createSelector=d,e.createSelectorFactory=l,e.createFeatureSelector=function(e){return d(function(t){return t[e]},function(e){return e})},e.defaultMemoize=p,e.defaultStateFn=f,e.State=L,e.StateObservable=z,e.reduceState=c,e.INITIAL_STATE=b,e._REDUCER_FACTORY=E,e.REDUCER_FACTORY=S,e._INITIAL_REDUCERS=T,e.INITIAL_REDUCERS=x,e.STORE_FEATURES=O,e._INITIAL_STATE=m,e.META_REDUCERS=F,e._STORE_REDUCERS=_,e._FEATURE_REDUCERS=A,e.FEATURE_REDUCERS=w,e._FEATURE_REDUCERS_TOKEN=k,e.StoreModule=H,e.StoreRootModule=K,e.StoreFeatureModule=G,e._initialStateFactory=h,e._createStoreReducers=y,e._createFeatureReducers=v,e.ɵc=j,e.ɵd=C,e.ɵe=V,e.ɵf=q,e.ɵb=Y,Object.defineProperty(e,"__esModule",{value:!0})});