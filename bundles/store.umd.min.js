!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/store",["exports","@angular/core","rxjs","rxjs/operators"],t):t((e.ngrx=e.ngrx||{},e.ngrx.store={}),e.ng.core,e.Rx,e.operators)}(this,function(e,n,a,s){"use strict";var o,c=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),r="@ngrx/store/init",t=function(t){function e(){return t.call(this,{type:r})||this}return c(e,t),e.prototype.next=function(e){if(void 0===e)throw new TypeError("Actions must be objects");if(void 0===e.type)throw new TypeError("Actions must have a type property");t.prototype.next.call(this,e)},e.prototype.complete=function(){},e.prototype.ngOnDestroy=function(){t.prototype.complete.call(this)},e}(a.BehaviorSubject);t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]};var i=[t],u=new n.InjectionToken("@ngrx/store Internal Initial State"),p=new n.InjectionToken("@ngrx/store Initial State"),d=new n.InjectionToken("@ngrx/store Reducer Factory"),f=new n.InjectionToken("@ngrx/store Reducer Factory Provider"),l=new n.InjectionToken("@ngrx/store Initial Reducers"),y=new n.InjectionToken("@ngrx/store Internal Initial Reducers"),v=new n.InjectionToken("@ngrx/store Meta Reducers"),h=new n.InjectionToken("@ngrx/store Store Features"),g=new n.InjectionToken("@ngrx/store Internal Store Reducers"),R=new n.InjectionToken("@ngrx/store Internal Feature Reducers"),I=new n.InjectionToken("@ngrx/store Internal Feature Reducers Token"),j=new n.InjectionToken("@ngrx/store Feature Reducers");function b(e,s){void 0===s&&(s={});for(var t=Object.keys(e),p={},r=0;r<t.length;r++){var n=t[r];"function"==typeof e[n]&&(p[n]=e[n])}var d=Object.keys(p);return function(e,t){e=void 0===e?s:e;for(var r=!1,n={},o=0;o<d.length;o++){var i=d[o],c=p[i],u=e[i],a=c(u,t);n[i]=a,r=r||a!==u}return r?n:e}}function m(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(e){if(0===r.length)return e;var t=r[r.length-1];return r.slice(0,-1).reduceRight(function(e,t){return t(e)},t(e))}}function S(e,t){return Array.isArray(t)&&0<t.length?m.apply(null,t.concat([e])):e}var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a.Observable),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(t),T="@ngrx/store/update-reducers",F=function(i){function e(e,t,r,n){var o=i.call(this,n(r,t))||this;return o.dispatcher=e,o.initialState=t,o.reducers=r,o.reducerFactory=n,o}return c(e,i),e.prototype.addFeature=function(e){var r,n,t,o,i=e.reducers,c=e.reducerFactory,u=e.metaReducers,a=e.initialState,s=e.key,p="function"==typeof i?(t=u,o=Array.isArray(t)&&0<t.length?m.apply(void 0,t):function(e){return e},n=a,r=o(r=i),function(e,t){return r(e=void 0===e?n:e,t)}):S(c,u)(i,a);this.addReducer(s,p)},e.prototype.removeFeature=function(e){var t=e.key;this.removeReducer(t)},e.prototype.addReducer=function(e,t){var r;this.reducers=Object.assign({},this.reducers,((r={})[e]=t,r)),this.updateReducers(e)},e.prototype.removeReducer=function(e){var n,t;this.reducers=(n=this.reducers,t=e,Object.keys(n).filter(function(e){return e!==t}).reduce(function(e,t){return Object.assign(e,((r={})[t]=n[t],r));var r},{})),this.updateReducers(e)},e.prototype.updateReducers=function(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:T,feature:e})},e.prototype.ngOnDestroy=function(){this.complete()},e}(a.BehaviorSubject);F.decorators=[{type:n.Injectable}],F.ctorParameters=function(){return[{type:x},{type:void 0,decorators:[{type:n.Inject,args:[p]}]},{type:void 0,decorators:[{type:n.Inject,args:[l]}]},{type:void 0,decorators:[{type:n.Inject,args:[d]}]}]};var O=[F,{provide:E,useExisting:F},{provide:x,useExisting:t}],_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.ngOnDestroy=function(){this.complete()},t}(a.Subject);_.decorators=[{type:n.Injectable}];var A=[_],k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a.Observable),w=function(u){function e(e,t,n,r){var o=u.call(this,r)||this,i={state:r},c=e.pipe(s.observeOn(a.queueScheduler)).pipe(s.withLatestFrom(t)).pipe(s.scan(M,i));return o.stateSubscription=c.subscribe(function(e){var t=e.state,r=e.action;o.next(t),n.next(r)}),o}return c(e,u),e.prototype.ngOnDestroy=function(){this.stateSubscription.unsubscribe(),this.complete()},e}(a.BehaviorSubject);function M(e,t){void 0===e&&(e={state:void 0});var r=t[0];return{state:(0,t[1])(e.state,r),action:r}}w.INIT=r,w.decorators=[{type:n.Injectable}],w.ctorParameters=function(){return[{type:t},{type:E},{type:_},{type:void 0,decorators:[{type:n.Inject,args:[p]}]}]};var D=[w,{provide:k,useExisting:w}],U=function(o){function r(e,t,r){var n=o.call(this)||this;return n.actionsObserver=t,n.reducerManager=r,n.source=e,n}return c(r,o),r.prototype.select=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return P.call.apply(P,[null,e].concat(t))(this)},r.prototype.lift=function(e){var t=new r(this,this.actionsObserver,this.reducerManager);return t.operator=e,t},r.prototype.dispatch=function(e){this.actionsObserver.next(e)},r.prototype.next=function(e){this.actionsObserver.next(e)},r.prototype.error=function(e){this.actionsObserver.error(e)},r.prototype.complete=function(){this.actionsObserver.complete()},r.prototype.addReducer=function(e,t){this.reducerManager.addReducer(e,t)},r.prototype.removeReducer=function(e){this.reducerManager.removeReducer(e)},r}(a.Observable);U.decorators=[{type:n.Injectable}],U.ctorParameters=function(){return[{type:k},{type:t},{type:F}]};var C=[U];function P(r){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(e){var t;if("string"==typeof r)t=e.pipe(s.pluck.apply(void 0,[r].concat(n)));else{if("function"!=typeof r)throw new TypeError("Unexpected type '"+typeof r+"' in select operator, expected 'string' or 'function'");t=e.pipe(s.map(r))}return t.pipe(s.distinctUntilChanged())}}function N(e,t){return e===t}function V(t,r){void 0===r&&(r=N);var n=null,o=null;return{memoized:function(){if(!n)return o=t.apply(null,arguments),n=arguments,o;for(var e=0;e<arguments.length;e++)if(!r(arguments[e],n[e]))return o=t.apply(null,arguments),n=arguments,o;return o},reset:function(){o=n=null}}}function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return q(V).apply(void 0,e)}function L(t,e,r){var n=e.map(function(e){return e(t)});return r.memoized.apply(null,n)}function q(p,d){return void 0===d&&(d={stateFn:L}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e;if(Array.isArray(r[0])){var n=r[0],o=r.slice(1);r=n.concat(o)}var i=r.slice(0,r.length-1),c=r[r.length-1],u=i.filter(function(e){return e.release&&"function"==typeof e.release}),a=p(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(null,e)}),s=V(function(e){return d.stateFn.apply(null,[e,i,a])});return Object.assign(s.memoized,{release:function(){s.reset(),a.reset(),u.forEach(function(e){return e.release()})},projector:a.memoized})}}var B=function(e,t,r,n){};B.decorators=[{type:n.NgModule,args:[{}]}],B.ctorParameters=function(){return[{type:t},{type:E},{type:_},{type:U}]};var Y=function(){function e(e,n,t,r){this.features=e,this.featureReducers=n,this.reducerManager=t,e.map(function(e,t){var r=n.shift()[t];return Object.assign({},e,{reducers:r,initialState:J(e.initialState)})}).forEach(function(e){return t.addFeature(e)})}return e.prototype.ngOnDestroy=function(){var t=this;this.features.forEach(function(e){return t.reducerManager.removeFeature(e)})},e}();Y.decorators=[{type:n.NgModule,args:[{}]}],Y.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Inject,args:[h]}]},{type:Array,decorators:[{type:n.Inject,args:[j]}]},{type:F},{type:B}]};var K=function(){function e(){}return e.forRoot=function(e,t){return void 0===t&&(t={}),{ngModule:B,providers:[{provide:u,useValue:t.initialState},{provide:p,useFactory:J,deps:[u]},{provide:y,useValue:e},{provide:g,useExisting:e instanceof n.InjectionToken?e:y},{provide:l,deps:[n.Injector,y,[new n.Inject(g)]],useFactory:G},{provide:v,useValue:t.metaReducers?t.metaReducers:[]},{provide:f,useValue:t.reducerFactory?t.reducerFactory:b},{provide:d,deps:[f,v],useFactory:S},i,O,A,D,C]}},e.forFeature=function(e,t,r){return void 0===r&&(r={}),{ngModule:Y,providers:[{provide:h,multi:!0,useValue:{key:e,reducerFactory:r.reducerFactory?r.reducerFactory:b,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}},{provide:R,multi:!0,useValue:t},{provide:I,multi:!0,useExisting:t instanceof n.InjectionToken?t:R},{provide:j,multi:!0,deps:[n.Injector,R,[new n.Inject(I)]],useFactory:H}]}},e}();function G(e,t,r){return t instanceof n.InjectionToken?e.get(t):t}function H(r,e,t){return e.map(function(e,t){return e instanceof n.InjectionToken?r.get(e):e})}function J(e){return"function"==typeof e?e():e}K.decorators=[{type:n.NgModule,args:[{}]}],e.Store=U,e.select=P,e.combineReducers=b,e.compose=m,e.createReducerFactory=S,e.ActionsSubject=t,e.INIT=r,e.ReducerManager=F,e.ReducerObservable=E,e.ReducerManagerDispatcher=x,e.UPDATE=T,e.ScannedActionsSubject=_,e.createSelector=z,e.createSelectorFactory=q,e.createFeatureSelector=function(t){return z(function(e){return e[t]},function(e){return e})},e.defaultMemoize=V,e.defaultStateFn=L,e.State=w,e.StateObservable=k,e.reduceState=M,e.INITIAL_STATE=p,e._REDUCER_FACTORY=f,e.REDUCER_FACTORY=d,e._INITIAL_REDUCERS=y,e.INITIAL_REDUCERS=l,e.STORE_FEATURES=h,e._INITIAL_STATE=u,e.META_REDUCERS=v,e._STORE_REDUCERS=g,e._FEATURE_REDUCERS=R,e.FEATURE_REDUCERS=j,e._FEATURE_REDUCERS_TOKEN=I,e.StoreModule=K,e.StoreRootModule=B,e.StoreFeatureModule=Y,e._initialStateFactory=J,e._createStoreReducers=G,e._createFeatureReducers=H,e.ɵc=i,e.ɵd=O,e.ɵe=A,e.ɵf=D,e.ɵb=C,Object.defineProperty(e,"__esModule",{value:!0})});