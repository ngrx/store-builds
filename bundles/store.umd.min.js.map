{"version":3,"sources":["../../../modules/store/src/utils.ts","../../../modules/store/src/state.ts","../../../modules/store/src/store_module.ts","../../../modules/store/src/selector.ts","../../../modules/store/src/tokens.ts","../../../modules/store/src/actions_subject.ts","../../../modules/store/src/reducer_manager.ts","../../../modules/store/src/scanned_actions_subject.ts","../../../modules/store/src/store.ts"],"names":["combineReducers","reducers","initialState","reducerKeys","Object","keys","finalReducers","i","length","key","finalReducerKeys","state","action","hasChanged","nextState","reducer","previousStateForKey","nextStateForKey","omit","object","keyToRemove","filter","reduce","result","assign","_a","compose","functions","_i","arguments","arg","last","slice","reduceRight","composed","fn","createReducerFactory","reducerFactory","metaReducers","Array","isArray","apply","concat","reduceState","stateActionPair","undefined","_createStoreReducers","injector","tokenReducers","InjectionToken","get","_createFeatureReducers","reducerCollection","tokenReducerCollection","map","index","_initialStateFactory","memoize","t","reset","lastArguments","lastResult","memoized","createSelector","release","memoizedState","memoizedProjector","memoizedSelectors","forEach","selector","input","args","head","tail","selectors","projector","createFeatureSelector","featureName","_INITIAL_STATE","INITIAL_STATE","REDUCER_FACTORY","_REDUCER_FACTORY","INITIAL_REDUCERS","_INITIAL_REDUCERS","META_REDUCERS","STORE_FEATURES","_STORE_REDUCERS","_FEATURE_REDUCERS","_FEATURE_REDUCERS_TOKEN","FEATURE_REDUCERS","INIT","ActionsSubject","_super","call","this","type","BehaviorSubject","prototype","next","TypeError","complete","ngOnDestroy","decorators","Injectable","ctorParameters","ACTIONS_SUBJECT_PROVIDERS","ReducerObservable","Observable","ReducerManagerDispatcher","__extends","UPDATE","ReducerManager","dispatcher","_this","addFeature","addReducer","removeFeature","removeReducer","updateReducers","Inject","REDUCER_MANAGER_PROVIDERS","provide","useExisting","ScannedActionsSubject","Subject","SCANNED_ACTIONS_SUBJECT_PROVIDERS","StateObservable","State","actions$","reducer$","scannedActions","actionsOnQueue$","observeOn","queue","withLatestReducer$","withLatestFrom","stateAndAction$","scan","stateSubscription","subscribe","unsubscribe","STATE_PROVIDERS","Store","state$","actionsObserver","reducerManager","source","select","pathOrMapFn","paths","mapped$","pluck","distinctUntilChanged","lift","operator","store","dispatch","error","err","STORE_PROVIDERS","StoreRootModule","scannedActions$","NgModule","StoreFeatureModule","features","featureReducers","feature","featureReducerCollection","shift","StoreModule","forRoot","config","ngModule","providers","useValue","useFactory","deps","Injector","forFeature","multi"],"mappings":"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","file":"./dist/store/bundles/store.umd.min.js","sourcesContent":["import {\n  Action,\n  ActionReducer,\n  ActionReducerMap,\n  ActionReducerFactory,\n  MetaReducer,\n} from './models';\n\nexport function combineReducers<T, V extends Action = Action>(\n  reducers: ActionReducerMap<T, V>,\n  initialState?: Partial<T>\n): ActionReducer<T, V>;\n/**\n * @param {?} reducers\n * @param {?=} initialState\n * @return {?}\n */\nexport function combineReducers(\n  reducers: any,\n  initialState: any = {}\n): ActionReducer<any, Action> {\n  const /** @type {?} */ reducerKeys = Object.keys(reducers);\n  const /** @type {?} */ finalReducers: any = {};\n\n  for (let /** @type {?} */ i = 0; i < reducerKeys.length; i++) {\n    const /** @type {?} */ key = reducerKeys[i];\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  const /** @type {?} */ finalReducerKeys = Object.keys(finalReducers);\n\n  return function combination(state, action) {\n    state = state || initialState;\n    let /** @type {?} */ hasChanged = false;\n    const /** @type {?} */ nextState: any = {};\n    for (let /** @type {?} */ i = 0; i < finalReducerKeys.length; i++) {\n      const /** @type {?} */ key = finalReducerKeys[i];\n      const /** @type {?} */ reducer: any = finalReducers[key];\n      const /** @type {?} */ previousStateForKey = state[key];\n      const /** @type {?} */ nextStateForKey = reducer(previousStateForKey, action);\n\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n/**\n * @template T\n * @param {?} object\n * @param {?} keyToRemove\n * @return {?}\n */\nexport function omit<T extends { [key: string]: any }>(\n  object: T,\n  keyToRemove: keyof T\n): Partial<T> {\n  return Object.keys(object)\n    .filter(key => key !== keyToRemove)\n    .reduce((result, key) => Object.assign(result, { [key]: object[key] }), {});\n}\n\nexport function compose<A>(): (i: A) => A;\nexport function compose<A, B>(b: (i: A) => B): (i: A) => B;\nexport function compose<A, B, C>(c: (i: B) => C, b: (i: A) => B): (i: A) => C;\nexport function compose<A, B, C, D>(\n  d: (i: C) => D,\n  c: (i: B) => C,\n  b: (i: A) => B\n): (i: A) => D;\nexport function compose<A, B, C, D, E>(\n  e: (i: D) => E,\n  d: (i: C) => D,\n  c: (i: B) => C,\n  b: (i: A) => B\n): (i: A) => E;\nexport function compose<A, B, C, D, E, F>(\n  f: (i: E) => F,\n  e: (i: D) => E,\n  d: (i: C) => D,\n  c: (i: B) => C,\n  b: (i: A) => B\n): (i: A) => F;\n/**\n * @param {...?} functions\n * @return {?}\n */\nexport function compose(...functions: any[]) {\n  return function(arg: any) {\n    if (functions.length === 0) {\n      return arg;\n    }\n\n    const /** @type {?} */ last = functions[functions.length - 1];\n    const /** @type {?} */ rest = functions.slice(0, -1);\n\n    return rest.reduceRight((composed, fn) => fn(composed), last(arg));\n  };\n}\n/**\n * @template T, V\n * @param {?} reducerFactory\n * @param {?=} metaReducers\n * @return {?}\n */\nexport function createReducerFactory<T, V extends Action = Action>(\n  reducerFactory: ActionReducerFactory<T, V>,\n  metaReducers?: MetaReducer<T, V>[]\n): ActionReducerFactory<T, V> {\n  if (Array.isArray(metaReducers) && metaReducers.length > 0) {\n    return compose.apply(null, [...metaReducers, reducerFactory]);\n  }\n\n  return reducerFactory;\n}\n","import { Injectable, Inject, OnDestroy, Provider } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Observable } from 'rxjs/Observable';\nimport { Subscription } from 'rxjs/Subscription';\nimport { queue } from 'rxjs/scheduler/queue';\nimport { observeOn } from 'rxjs/operator/observeOn';\nimport { withLatestFrom } from 'rxjs/operator/withLatestFrom';\nimport { scan } from 'rxjs/operator/scan';\nimport { ActionsSubject, INIT } from './actions_subject';\nimport { Action, ActionReducer } from './models';\nimport { INITIAL_STATE } from './tokens';\nimport { ReducerObservable } from './reducer_manager';\nimport { ScannedActionsSubject } from './scanned_actions_subject';\n/**\n * @abstract\n */\nexport abstract class StateObservable extends Observable<any> {}\nexport class State<T> extends BehaviorSubject<any> implements OnDestroy {\n  static readonly INIT = INIT;\nprivate stateSubscription: Subscription;\n/**\n * @param {?} actions$\n * @param {?} reducer$\n * @param {?} scannedActions\n * @param {?} initialState\n */\nconstructor(\n    actions$: ActionsSubject,\n    reducer$: ReducerObservable,\n    scannedActions: ScannedActionsSubject,\n     initialState: any\n  ) {\n    super(initialState);\n\n    const actionsOnQueue$: Observable<Action> = observeOn.call(actions$, queue);\n    const withLatestReducer$: Observable<\n      [Action, ActionReducer<any, Action>]\n    > = withLatestFrom.call(actionsOnQueue$, reducer$);\n    const stateAndAction$: Observable<{\n      state: any;\n      action: Action;\n    }> = scan.call(withLatestReducer$, reduceState, { state: initialState });\n\n    this.stateSubscription = stateAndAction$.subscribe({\n      next: ({ state, action }) => {\n        this.next(state);\n        scannedActions.next(action);\n      },\n    });\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.stateSubscription.unsubscribe();\n    this.complete();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ActionsSubject, },\n{type: ReducerObservable, },\n{type: ScannedActionsSubject, },\n{type: undefined, decorators: [{ type: Inject, args: [INITIAL_STATE, ] }, ]},\n];\n}\n\nfunction State_tsickle_Closure_declarations() {\n/** @type {?} */\nState.INIT;\n/** @type {?} */\nState.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nState.ctorParameters;\n/** @type {?} */\nState.prototype.stateSubscription;\n}\n\n\nexport type StateActionPair<T, V extends Action = Action> = {\n  state: T | undefined;\n  action?: V;\n};\n/**\n * @template T, V\n * @param {?=} stateActionPair\n * @param {?=} __1\n * @return {?}\n */\nexport function reduceState<T, V extends Action = Action>(\n  stateActionPair: StateActionPair<T, V> = { state: undefined },\n  [action, reducer]: [V, ActionReducer<T, V>]\n): StateActionPair<T, V> {\n  const { state } = stateActionPair;\n  return { state: reducer(state, action), action };\n}\n\nexport const /** @type {?} */ STATE_PROVIDERS: Provider[] = [\n  State,\n  { provide: StateObservable, useExisting: State },\n];\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n  NgModule,\n  Inject,\n  ModuleWithProviders,\n  OnDestroy,\n  InjectionToken,\n  Injector,\n} from '@angular/core';\nimport {\n  Action,\n  ActionReducer,\n  ActionReducerMap,\n  ActionReducerFactory,\n  StoreFeature,\n  InitialState,\n  MetaReducer,\n} from './models';\nimport { compose, combineReducers, createReducerFactory } from './utils';\nimport {\n  INITIAL_STATE,\n  INITIAL_REDUCERS,\n  _INITIAL_REDUCERS,\n  REDUCER_FACTORY,\n  _REDUCER_FACTORY,\n  STORE_FEATURES,\n  _INITIAL_STATE,\n  META_REDUCERS,\n  _STORE_REDUCERS,\n  FEATURE_REDUCERS,\n  _FEATURE_REDUCERS,\n  _FEATURE_REDUCERS_TOKEN,\n} from './tokens';\nimport { ACTIONS_SUBJECT_PROVIDERS, ActionsSubject } from './actions_subject';\nimport {\n  REDUCER_MANAGER_PROVIDERS,\n  ReducerManager,\n  ReducerObservable,\n} from './reducer_manager';\nimport {\n  SCANNED_ACTIONS_SUBJECT_PROVIDERS,\n  ScannedActionsSubject,\n} from './scanned_actions_subject';\nimport { STATE_PROVIDERS } from './state';\nimport { STORE_PROVIDERS } from './store';\nexport class StoreRootModule {\n/**\n * @param {?} actions$\n * @param {?} reducer$\n * @param {?} scannedActions$\n */\nconstructor(\n    actions$: ActionsSubject,\n    reducer$: ReducerObservable,\n    scannedActions$: ScannedActionsSubject\n  ) {}\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ActionsSubject, },\n{type: ReducerObservable, },\n{type: ScannedActionsSubject, },\n];\n}\n\nfunction StoreRootModule_tsickle_Closure_declarations() {\n/** @type {?} */\nStoreRootModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStoreRootModule.ctorParameters;\n}\n\nexport class StoreFeatureModule implements OnDestroy {\n/**\n * @param {?} features\n * @param {?} featureReducers\n * @param {?} reducerManager\n */\nconstructor(\nprivate features: StoreFeature<any, any>[],\nprivate featureReducers: ActionReducerMap<any>[],\nprivate reducerManager: ReducerManager\n  ) {\n    features\n      .map((feature, index) => {\n        const featureReducerCollection = featureReducers.shift();\n        const reducers = featureReducerCollection[index];\n\n        return {\n          ...feature,\n          reducers,\n          initialState: _initialStateFactory(feature.initialState),\n        };\n      })\n      .forEach(feature => reducerManager.addFeature(feature));\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.features.forEach(feature =>\n      this.reducerManager.removeFeature(feature)\n    );\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Array, decorators: [{ type: Inject, args: [STORE_FEATURES, ] }, ]},\n{type: Array, decorators: [{ type: Inject, args: [FEATURE_REDUCERS, ] }, ]},\n{type: ReducerManager, },\n];\n}\n\nfunction StoreFeatureModule_tsickle_Closure_declarations() {\n/** @type {?} */\nStoreFeatureModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStoreFeatureModule.ctorParameters;\n/** @type {?} */\nStoreFeatureModule.prototype.features;\n/** @type {?} */\nStoreFeatureModule.prototype.featureReducers;\n/** @type {?} */\nStoreFeatureModule.prototype.reducerManager;\n}\n\n\nexport type StoreConfig<T, V extends Action = Action> = {\n  initialState?: InitialState<T>;\n  reducerFactory?: ActionReducerFactory<T, V>;\n  metaReducers?: MetaReducer<T, V>[];\n};\nexport class StoreModule {\n  static forRoot<T, V extends Action = Action>(\n    reducers: ActionReducerMap<T, V> | InjectionToken<ActionReducerMap<T, V>>,\n    config?: StoreConfig<T, V>\n  ): ModuleWithProviders;\n/**\n * @param {?} reducers\n * @param {?=} config\n * @return {?}\n */\nstatic forRoot(\n    reducers:\n      | ActionReducerMap<any, any>\n      | InjectionToken<ActionReducerMap<any, any>>,\n    config: StoreConfig<any, any> = {}\n  ): ModuleWithProviders {\n    return {\n      ngModule: StoreRootModule,\n      providers: [\n        { provide: _INITIAL_STATE, useValue: config.initialState },\n        {\n          provide: INITIAL_STATE,\n          useFactory: _initialStateFactory,\n          deps: [_INITIAL_STATE],\n        },\n        { provide: _INITIAL_REDUCERS, useValue: reducers },\n        {\n          provide: _STORE_REDUCERS,\n          useExisting:\n            reducers instanceof InjectionToken ? reducers : _INITIAL_REDUCERS,\n        },\n        {\n          provide: INITIAL_REDUCERS,\n          deps: [Injector, _INITIAL_REDUCERS, [new Inject(_STORE_REDUCERS)]],\n          useFactory: _createStoreReducers,\n        },\n        {\n          provide: META_REDUCERS,\n          useValue: config.metaReducers ? config.metaReducers : [],\n        },\n        {\n          provide: _REDUCER_FACTORY,\n          useValue: config.reducerFactory\n            ? config.reducerFactory\n            : combineReducers,\n        },\n        {\n          provide: REDUCER_FACTORY,\n          deps: [_REDUCER_FACTORY, META_REDUCERS],\n          useFactory: createReducerFactory,\n        },\n        ACTIONS_SUBJECT_PROVIDERS,\n        REDUCER_MANAGER_PROVIDERS,\n        SCANNED_ACTIONS_SUBJECT_PROVIDERS,\n        STATE_PROVIDERS,\n        STORE_PROVIDERS,\n      ],\n    };\n  }\n\n  static forFeature<T, V extends Action = Action>(\n    featureName: string,\n    reducers: ActionReducerMap<T, V> | InjectionToken<ActionReducerMap<T, V>>,\n    config?: StoreConfig<T, V>\n  ): ModuleWithProviders;\n  static forFeature<T, V extends Action = Action>(\n    featureName: string,\n    reducer: ActionReducer<T, V> | InjectionToken<ActionReducer<T, V>>,\n    config?: StoreConfig<T, V>\n  ): ModuleWithProviders;\n/**\n * @param {?} featureName\n * @param {?} reducers\n * @param {?=} config\n * @return {?}\n */\nstatic forFeature(\n    featureName: string,\n    reducers:\n      | ActionReducerMap<any, any>\n      | InjectionToken<ActionReducerMap<any, any>>\n      | ActionReducer<any, any>\n      | InjectionToken<ActionReducer<any, any>>,\n    config: StoreConfig<any, any> = {}\n  ): ModuleWithProviders {\n    return {\n      ngModule: StoreFeatureModule,\n      providers: [\n        {\n          provide: STORE_FEATURES,\n          multi: true,\n          useValue: /** @type {?} */(( <StoreFeature<any, any>>{\n            key: featureName,\n            reducerFactory: config.reducerFactory\n              ? config.reducerFactory\n              : combineReducers,\n            metaReducers: config.metaReducers ? config.metaReducers : [],\n            initialState: config.initialState,\n          })),\n        },\n        { provide: _FEATURE_REDUCERS, multi: true, useValue: reducers },\n        {\n          provide: _FEATURE_REDUCERS_TOKEN,\n          multi: true,\n          useExisting:\n            reducers instanceof InjectionToken ? reducers : _FEATURE_REDUCERS,\n        },\n        {\n          provide: FEATURE_REDUCERS,\n          multi: true,\n          deps: [\n            Injector,\n            _FEATURE_REDUCERS,\n            [new Inject(_FEATURE_REDUCERS_TOKEN)],\n          ],\n          useFactory: _createFeatureReducers,\n        },\n      ],\n    };\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction StoreModule_tsickle_Closure_declarations() {\n/** @type {?} */\nStoreModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStoreModule.ctorParameters;\n}\n\n/**\n * @param {?} injector\n * @param {?} reducers\n * @param {?} tokenReducers\n * @return {?}\n */\nexport function _createStoreReducers(\n  injector: Injector,\n  reducers: ActionReducerMap<any, any>,\n  tokenReducers: ActionReducerMap<any, any>\n) {\n  return reducers instanceof InjectionToken ? injector.get(reducers) : reducers;\n}\n/**\n * @param {?} injector\n * @param {?} reducerCollection\n * @param {?} tokenReducerCollection\n * @return {?}\n */\nexport function _createFeatureReducers(\n  injector: Injector,\n  reducerCollection: ActionReducerMap<any, any>[],\n  tokenReducerCollection: ActionReducerMap<any, any>[]\n) {\n  return reducerCollection.map((reducer, index) => {\n    return reducer instanceof InjectionToken ? injector.get(reducer) : reducer;\n  });\n}\n/**\n * @param {?} initialState\n * @return {?}\n */\nexport function _initialStateFactory(initialState: any): any {\n  if (typeof initialState === 'function') {\n    return initialState();\n  }\n\n  return initialState;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Selector } from './models';\n\nexport type AnyFn = (...args: any[]) => any;\n\nexport interface MemoizedSelector<State, Result>\n  extends Selector<State, Result> {\n  release(): void;\n  projector: AnyFn;\n}\n/**\n * @param {?} t\n * @return {?}\n */\nexport function memoize(t: AnyFn): { memoized: AnyFn; reset: () => void } {\n  let /** @type {?} */ lastArguments: null | IArguments = null;\n  let /** @type {?} */ lastResult: any = null;\n/**\n * @return {?}\n */\nfunction reset() {\n    lastArguments = null;\n    lastResult = null;\n  }\n/**\n * @return {?}\n */\nfunction memoized(): any {\n    if (!lastArguments) {\n      lastResult = t.apply(null, arguments);\n      lastArguments = arguments;\n\n      return lastResult;\n    }\n    for (let /** @type {?} */ i = 0; i < arguments.length; i++) {\n      if (arguments[i] !== lastArguments[i]) {\n        lastResult = t.apply(null, arguments);\n        lastArguments = arguments;\n\n        return lastResult;\n      }\n    }\n\n    return lastResult;\n  }\n\n  return { memoized, reset };\n}\n\nexport function createSelector<State, S1, Result>(\n  s1: Selector<State, S1>,\n  projector: (S1: S1) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, Result>(\n  selectors: [Selector<State, S1>],\n  projector: (s1: S1) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  projector: (s1: S1, s2: S2) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, Result>(\n  selectors: [Selector<State, S1>, Selector<State, S2>],\n  projector: (s1: S1, s2: S2) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  s3: Selector<State, S3>,\n  projector: (s1: S1, s2: S2, s3: S3) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, Result>(\n  selectors: [Selector<State, S1>, Selector<State, S2>, Selector<State, S3>],\n  projector: (s1: S1, s2: S2, s3: S3) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  s3: Selector<State, S3>,\n  s4: Selector<State, S4>,\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, Result>(\n  selectors: [\n    Selector<State, S1>,\n    Selector<State, S2>,\n    Selector<State, S3>,\n    Selector<State, S4>\n  ],\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  s3: Selector<State, S3>,\n  s4: Selector<State, S4>,\n  s5: Selector<State, S5>,\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4, s5: S5) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, Result>(\n  selectors: [\n    Selector<State, S1>,\n    Selector<State, S2>,\n    Selector<State, S3>,\n    Selector<State, S4>,\n    Selector<State, S5>\n  ],\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4, s5: S5) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, S6, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  s3: Selector<State, S3>,\n  s4: Selector<State, S4>,\n  s5: Selector<State, S5>,\n  s6: Selector<State, S6>,\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4, s5: S5, s6: S6) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, S6, Result>(\n  selectors: [\n    Selector<State, S1>,\n    Selector<State, S2>,\n    Selector<State, S3>,\n    Selector<State, S4>,\n    Selector<State, S5>,\n    Selector<State, S6>\n  ],\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4, s5: S5, s6: S6) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, S6, S7, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  s3: Selector<State, S3>,\n  s4: Selector<State, S4>,\n  s5: Selector<State, S5>,\n  s6: Selector<State, S6>,\n  s7: Selector<State, S7>,\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4, s5: S5, s6: S6, s7: S7) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, S6, S7, Result>(\n  selectors: [\n    Selector<State, S1>,\n    Selector<State, S2>,\n    Selector<State, S3>,\n    Selector<State, S4>,\n    Selector<State, S5>,\n    Selector<State, S6>,\n    Selector<State, S7>\n  ],\n  projector: (s1: S1, s2: S2, s3: S3, s4: S4, s5: S5, s6: S6, s7: S7) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, S6, S7, S8, Result>(\n  s1: Selector<State, S1>,\n  s2: Selector<State, S2>,\n  s3: Selector<State, S3>,\n  s4: Selector<State, S4>,\n  s5: Selector<State, S5>,\n  s6: Selector<State, S6>,\n  s7: Selector<State, S7>,\n  s8: Selector<State, S8>,\n  projector: (\n    s1: S1,\n    s2: S2,\n    s3: S3,\n    s4: S4,\n    s5: S5,\n    s6: S6,\n    s7: S7,\n    s8: S8\n  ) => Result\n): MemoizedSelector<State, Result>;\nexport function createSelector<State, S1, S2, S3, S4, S5, S6, S7, S8, Result>(\n  selectors: [\n    Selector<State, S1>,\n    Selector<State, S2>,\n    Selector<State, S3>,\n    Selector<State, S4>,\n    Selector<State, S5>,\n    Selector<State, S6>,\n    Selector<State, S7>,\n    Selector<State, S8>\n  ],\n  projector: (\n    s1: S1,\n    s2: S2,\n    s3: S3,\n    s4: S4,\n    s5: S5,\n    s6: S6,\n    s7: S7,\n    s8: S8\n  ) => Result\n): MemoizedSelector<State, Result>;\n/**\n * @param {...?} input\n * @return {?}\n */\nexport function createSelector(...input: any[]): Selector<any, any> {\n  let /** @type {?} */ args = input;\n  if (Array.isArray(args[0])) {\n    const [head, ...tail] = args;\n    args = [...head, ...tail];\n  }\n\n  const /** @type {?} */ selectors = args.slice(0, args.length - 1);\n  const /** @type {?} */ projector = args[args.length - 1];\n  const /** @type {?} */ memoizedSelectors = selectors.filter(\n    (selector: any) =>\n      selector.release && typeof selector.release === 'function'\n  );\n\n  const /** @type {?} */ memoizedProjector = memoize(function(...selectors: any[]) {\n    return projector.apply(null, selectors);\n  });\n\n  const /** @type {?} */ memoizedState = memoize(function(state: any) {\n    const /** @type {?} */ args = selectors.map(fn => fn(state));\n\n    return memoizedProjector.memoized.apply(null, args);\n  });\n/**\n * @return {?}\n */\nfunction release() {\n    memoizedState.reset();\n    memoizedProjector.reset();\n\n    memoizedSelectors.forEach(selector => selector.release());\n  }\n\n  return Object.assign(memoizedState.memoized, {\n    release,\n    projector: memoizedProjector.memoized,\n  });\n}\n/**\n * @template T\n * @param {?} featureName\n * @return {?}\n */\nexport function createFeatureSelector<T>(\n  featureName: string\n): MemoizedSelector<object, T> {\n  const { memoized, reset } = memoize(function(state: any): any {\n    return state[featureName];\n  });\n\n  return Object.assign(memoized, { release: reset, projector: memoized });\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const /** @type {?} */ _INITIAL_STATE = new InjectionToken(\n  '@ngrx/store Internal Initial State'\n);\nexport const /** @type {?} */ INITIAL_STATE = new InjectionToken('@ngrx/store Initial State');\nexport const /** @type {?} */ REDUCER_FACTORY = new InjectionToken(\n  '@ngrx/store Reducer Factory'\n);\nexport const /** @type {?} */ _REDUCER_FACTORY = new InjectionToken(\n  '@ngrx/store Reducer Factory Provider'\n);\nexport const /** @type {?} */ INITIAL_REDUCERS = new InjectionToken(\n  '@ngrx/store Initial Reducers'\n);\nexport const /** @type {?} */ _INITIAL_REDUCERS = new InjectionToken(\n  '@ngrx/store Internal Initial Reducers'\n);\nexport const /** @type {?} */ META_REDUCERS = new InjectionToken('@ngrx/store Meta Reducers');\nexport const /** @type {?} */ STORE_FEATURES = new InjectionToken('@ngrx/store Store Features');\nexport const /** @type {?} */ _STORE_REDUCERS = new InjectionToken(\n  '@ngrx/store Internal Store Reducers'\n);\nexport const /** @type {?} */ _FEATURE_REDUCERS = new InjectionToken(\n  '@ngrx/store Internal Feature Reducers'\n);\nexport const /** @type {?} */ _FEATURE_REDUCERS_TOKEN = new InjectionToken(\n  '@ngrx/store Internal Feature Reducers Token'\n);\nexport const /** @type {?} */ FEATURE_REDUCERS = new InjectionToken(\n  '@ngrx/store Feature Reducers'\n);\n","import { Injectable, OnDestroy, Provider } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\nimport { Action } from './models';\n\nexport const /** @type {?} */ INIT = /** @type {?} */(( '@ngrx/store/init' as '@ngrx/store/init'));\nexport class ActionsSubject extends BehaviorSubject<Action>\n  implements OnDestroy {\nconstructor() {\n    super({ type: INIT });\n  }\n/**\n * @param {?} action\n * @return {?}\n */\nnext(action: Action): void {\n    if (typeof action === 'undefined') {\n      throw new TypeError(`Actions must be objects`);\n    } else if (typeof action.type === 'undefined') {\n      throw new TypeError(`Actions must have a type property`);\n    }\n\n    super.next(action);\n  }\n/**\n * @return {?}\n */\ncomplete() {\n    /* noop */\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    super.complete();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ActionsSubject_tsickle_Closure_declarations() {\n/** @type {?} */\nActionsSubject.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nActionsSubject.ctorParameters;\n}\n\n\nexport const /** @type {?} */ ACTIONS_SUBJECT_PROVIDERS: Provider[] = [ActionsSubject];\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Injectable, Inject, OnDestroy, Provider } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Observable } from 'rxjs/Observable';\nimport {\n  Action,\n  ActionReducer,\n  ActionReducerMap,\n  ActionReducerFactory,\n  StoreFeature,\n} from './models';\nimport { INITIAL_STATE, INITIAL_REDUCERS, REDUCER_FACTORY } from './tokens';\nimport { omit, createReducerFactory } from './utils';\nimport { ActionsSubject } from './actions_subject';\n/**\n * @abstract\n */\nexport abstract class ReducerObservable extends Observable<\n  ActionReducer<any, any>\n> {}\n/**\n * @abstract\n */\nexport abstract class ReducerManagerDispatcher extends ActionsSubject {}\nexport const /** @type {?} */ UPDATE = /** @type {?} */(( '@ngrx/store/update-reducers' as '@ngrx/store/update-reducers'));\nexport class ReducerManager extends BehaviorSubject<ActionReducer<any, any>>\n  implements OnDestroy {\n/**\n * @param {?} dispatcher\n * @param {?} initialState\n * @param {?} reducers\n * @param {?} reducerFactory\n */\nconstructor(\nprivate dispatcher: ReducerManagerDispatcher,\nprivate initialState: any,\nprivate reducers: ActionReducerMap<any, any>,\nprivate reducerFactory: ActionReducerFactory<any, any>\n  ) {\n    super(reducerFactory(reducers, initialState));\n  }\n/**\n * @param {?} __0\n * @return {?}\n */\naddFeature({\n    reducers,\n    reducerFactory,\n    metaReducers,\n    initialState,\n    key,\n  }: StoreFeature<any, any>) {\n    const /** @type {?} */ reducer =\n      typeof reducers === 'function'\n        ? (state: any, action: any) => reducers(state || initialState, action)\n        : createReducerFactory(reducerFactory, metaReducers)(\n            reducers,\n            initialState\n          );\n\n    this.addReducer(key, reducer);\n  }\n/**\n * @param {?} __0\n * @return {?}\n */\nremoveFeature({ key }: StoreFeature<any, any>) {\n    this.removeReducer(key);\n  }\n/**\n * @param {?} key\n * @param {?} reducer\n * @return {?}\n */\naddReducer(key: string, reducer: ActionReducer<any, any>) {\n    this.reducers = { ...this.reducers, [key]: reducer };\n\n    this.updateReducers();\n  }\n/**\n * @param {?} key\n * @return {?}\n */\nremoveReducer(key: string) {\n    this.reducers = omit(this.reducers, key);\n\n    this.updateReducers();\n  }\n/**\n * @return {?}\n */\nprivate updateReducers() {\n    this.next(this.reducerFactory(this.reducers, this.initialState));\n    this.dispatcher.next({ type: UPDATE });\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.complete();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ReducerManagerDispatcher, },\n{type: undefined, decorators: [{ type: Inject, args: [INITIAL_STATE, ] }, ]},\n{type: undefined, decorators: [{ type: Inject, args: [INITIAL_REDUCERS, ] }, ]},\n{type: undefined, decorators: [{ type: Inject, args: [REDUCER_FACTORY, ] }, ]},\n];\n}\n\nfunction ReducerManager_tsickle_Closure_declarations() {\n/** @type {?} */\nReducerManager.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nReducerManager.ctorParameters;\n/** @type {?} */\nReducerManager.prototype.dispatcher;\n/** @type {?} */\nReducerManager.prototype.initialState;\n/** @type {?} */\nReducerManager.prototype.reducers;\n/** @type {?} */\nReducerManager.prototype.reducerFactory;\n}\n\n\nexport const /** @type {?} */ REDUCER_MANAGER_PROVIDERS: Provider[] = [\n  ReducerManager,\n  { provide: ReducerObservable, useExisting: ReducerManager },\n  { provide: ReducerManagerDispatcher, useExisting: ActionsSubject },\n];\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Injectable, Provider, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\nimport { Action } from './models';\nexport class ScannedActionsSubject extends Subject<Action>\n  implements OnDestroy {\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.complete();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ScannedActionsSubject_tsickle_Closure_declarations() {\n/** @type {?} */\nScannedActionsSubject.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nScannedActionsSubject.ctorParameters;\n}\n\n\nexport const /** @type {?} */ SCANNED_ACTIONS_SUBJECT_PROVIDERS: Provider[] = [\n  ScannedActionsSubject,\n];\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Injectable, Provider } from '@angular/core';\nimport { Observer } from 'rxjs/Observer';\nimport { Observable } from 'rxjs/Observable';\nimport { Operator } from 'rxjs/Operator';\nimport { map } from 'rxjs/operator/map';\nimport { pluck } from 'rxjs/operator/pluck';\nimport { distinctUntilChanged } from 'rxjs/operator/distinctUntilChanged';\nimport { Action, ActionReducer } from './models';\nimport { ActionsSubject } from './actions_subject';\nimport { StateObservable } from './state';\nimport { ReducerManager } from './reducer_manager';\nexport class Store<T> extends Observable<T> implements Observer<Action> {\n/**\n * @param {?} state$\n * @param {?} actionsObserver\n * @param {?} reducerManager\n */\nconstructor(\n    state$: StateObservable,\nprivate actionsObserver: ActionsSubject,\nprivate reducerManager: ReducerManager\n  ) {\n    super();\n\n    this.source = state$;\n  }\n\n  select<K>(mapFn: (state: T) => K): Store<K>;\n  select<a extends keyof T>(key: a): Store<T[a]>;\n  select<a extends keyof T, b extends keyof T[a]>(\n    key1: a,\n    key2: b\n  ): Store<T[a][b]>;\n  select<a extends keyof T, b extends keyof T[a], c extends keyof T[a][b]>(\n    key1: a,\n    key2: b,\n    key3: c\n  ): Store<T[a][b][c]>;\n  select<\n    a extends keyof T,\n    b extends keyof T[a],\n    c extends keyof T[a][b],\n    d extends keyof T[a][b][c]\n  >(key1: a, key2: b, key3: c, key4: d): Store<T[a][b][c][d]>;\n  select<\n    a extends keyof T,\n    b extends keyof T[a],\n    c extends keyof T[a][b],\n    d extends keyof T[a][b][c],\n    e extends keyof T[a][b][c][d]\n  >(key1: a, key2: b, key3: c, key4: d, key5: e): Store<T[a][b][c][d][e]>;\n  select<\n    a extends keyof T,\n    b extends keyof T[a],\n    c extends keyof T[a][b],\n    d extends keyof T[a][b][c],\n    e extends keyof T[a][b][c][d],\n    f extends keyof T[a][b][c][d][e]\n  >(\n    key1: a,\n    key2: b,\n    key3: c,\n    key4: d,\n    key5: e,\n    key6: f\n  ): Store<T[a][b][c][d][e][f]>;\n/**\n * @param {?} pathOrMapFn\n * @param {...?} paths\n * @return {?}\n */\nselect(\n    pathOrMapFn: ((state: T) => any) | string,\n    ...paths: string[]\n  ): Store<any> {\n    let /** @type {?} */ mapped$: Store<any>;\n\n    if (typeof pathOrMapFn === 'string') {\n      mapped$ = pluck.call(this, pathOrMapFn, ...paths);\n    } else if (typeof pathOrMapFn === 'function') {\n      mapped$ = map.call(this, pathOrMapFn);\n    } else {\n      throw new TypeError(\n        `Unexpected type '${typeof pathOrMapFn}' in select operator,` +\n          ` expected 'string' or 'function'`\n      );\n    }\n\n    return distinctUntilChanged.call(mapped$);\n  }\n/**\n * @template R\n * @param {?} operator\n * @return {?}\n */\nlift<R>(operator: Operator<T, R>): Store<R> {\n    const /** @type {?} */ store = new Store<R>(this, this.actionsObserver, this.reducerManager);\n    store.operator = operator;\n\n    return store;\n  }\n/**\n * @template V\n * @param {?} action\n * @return {?}\n */\ndispatch<V extends Action = Action>(action: V) {\n    this.actionsObserver.next(action);\n  }\n/**\n * @param {?} action\n * @return {?}\n */\nnext(action: Action) {\n    this.actionsObserver.next(action);\n  }\n/**\n * @param {?} err\n * @return {?}\n */\nerror(err: any) {\n    this.actionsObserver.error(err);\n  }\n/**\n * @return {?}\n */\ncomplete() {\n    this.actionsObserver.complete();\n  }\n/**\n * @template State, Actions\n * @param {?} key\n * @param {?} reducer\n * @return {?}\n */\naddReducer<State, Actions extends Action = Action>(\n    key: string,\n    reducer: ActionReducer<State, Actions>\n  ) {\n    this.reducerManager.addReducer(key, reducer);\n  }\n/**\n * @template Key\n * @param {?} key\n * @return {?}\n */\nremoveReducer<Key extends keyof T>(key: Key) {\n    this.reducerManager.removeReducer(key);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: StateObservable, },\n{type: ActionsSubject, },\n{type: ReducerManager, },\n];\n}\n\nfunction Store_tsickle_Closure_declarations() {\n/** @type {?} */\nStore.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStore.ctorParameters;\n/** @type {?} */\nStore.prototype.actionsObserver;\n/** @type {?} */\nStore.prototype.reducerManager;\n}\n\n\nexport const /** @type {?} */ STORE_PROVIDERS: Provider[] = [Store];\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}