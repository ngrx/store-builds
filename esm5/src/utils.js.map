{"version":3,"file":"utils.js","sourceRoot":"ng://@ngrx/store/","sources":["src/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Action,\n  ActionReducer,\n  ActionReducerFactory,\n  ActionReducerMap,\n  MetaReducer,\n  InitialState,\n} from './models';\n\nexport function combineReducers<T, V extends Action = Action>(\n  reducers: ActionReducerMap<T, V>,\n  initialState?: Partial<T>\n): ActionReducer<T, V>;\nexport function combineReducers(\n  reducers: any,\n  initialState: any = {}\n): ActionReducer<any, Action> {\n  const reducerKeys = Object.keys(reducers);\n  const finalReducers: any = {};\n\n  for (let i = 0; i < reducerKeys.length; i++) {\n    const key = reducerKeys[i];\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  const finalReducerKeys = Object.keys(finalReducers);\n\n  return function combination(state, action) {\n    state = state === undefined ? initialState : state;\n    let hasChanged = false;\n    const nextState: any = {};\n    for (let i = 0; i < finalReducerKeys.length; i++) {\n      const key = finalReducerKeys[i];\n      const reducer: any = finalReducers[key];\n      const previousStateForKey = state[key];\n      const nextStateForKey = reducer(previousStateForKey, action);\n\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n\nexport function omit<T extends { [key: string]: any }>(\n  object: T,\n  keyToRemove: keyof T\n): Partial<T> {\n  return Object.keys(object)\n    .filter(key => key !== keyToRemove)\n    .reduce((result, key) => Object.assign(result, { [key]: object[key] }), {});\n}\n\nexport function compose<A>(): (i: A) => A;\nexport function compose<A, B>(b: (i: A) => B): (i: A) => B;\nexport function compose<A, B, C>(c: (i: B) => C, b: (i: A) => B): (i: A) => C;\nexport function compose<A, B, C, D>(\n  d: (i: C) => D,\n  c: (i: B) => C,\n  b: (i: A) => B\n): (i: A) => D;\nexport function compose<A, B, C, D, E>(\n  e: (i: D) => E,\n  d: (i: C) => D,\n  c: (i: B) => C,\n  b: (i: A) => B\n): (i: A) => E;\nexport function compose<A, B, C, D, E, F>(\n  f: (i: E) => F,\n  e: (i: D) => E,\n  d: (i: C) => D,\n  c: (i: B) => C,\n  b: (i: A) => B\n): (i: A) => F;\nexport function compose<A = any, F = any>(...functions: any[]): (i: A) => F;\nexport function compose(...functions: any[]) {\n  return function(arg: any) {\n    if (functions.length === 0) {\n      return arg;\n    }\n\n    const last = functions[functions.length - 1];\n    const rest = functions.slice(0, -1);\n\n    return rest.reduceRight((composed, fn) => fn(composed), last(arg));\n  };\n}\n\nexport function createReducerFactory<T, V extends Action = Action>(\n  reducerFactory: ActionReducerFactory<T, V>,\n  metaReducers?: MetaReducer<T, V>[]\n): ActionReducerFactory<T, V> {\n  if (Array.isArray(metaReducers) && metaReducers.length > 0) {\n    (reducerFactory as any) = compose.apply(null, [\n      ...metaReducers,\n      reducerFactory,\n    ]);\n  }\n\n  return (reducers: ActionReducerMap<T, V>, initialState?: InitialState<T>) => {\n    const reducer = reducerFactory(reducers);\n    return (state: T | undefined, action: V) => {\n      state = state === undefined ? (initialState as T) : state;\n      return reducer(state, action);\n    };\n  };\n}\n\nexport function createFeatureReducerFactory<T, V extends Action = Action>(\n  metaReducers?: MetaReducer<T, V>[]\n): (reducer: ActionReducer<T, V>, initialState?: T) => ActionReducer<T, V> {\n  const reducerFactory =\n    Array.isArray(metaReducers) && metaReducers.length > 0\n      ? compose<ActionReducer<T, V>>(...metaReducers)\n      : (r: ActionReducer<T, V>) => r;\n\n  return (reducer: ActionReducer<T, V>, initialState?: T) => {\n    reducer = reducerFactory(reducer);\n\n    return (state: T | undefined, action: V) => {\n      state = state === undefined ? initialState : state;\n      return reducer(state, action);\n    };\n  };\n}\n"]}